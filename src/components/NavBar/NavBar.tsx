import { JSX, useContext } from "react";
import { Link, useLocation } from "react-router-dom";
import { mainContext } from "../../context/MainProvider";

interface NavLinkProps {
	linkname?: string,
	path: string,
    imgInactive: JSX.Element,
	imgActive: JSX.Element,
    action?: () => void
}

export const NavLink = ({ linkname, path, imgInactive, imgActive, action }: NavLinkProps) => {    
	const location = useLocation()

	return (
		<Link
			to={path}
			className={`flex flex-col items-center gap-1 p-2 hover:text-main transition-colors`}
            onClick={action}>
            <div className={`h-7 aspect-square ${location.pathname === "/" + path ? `text-main` : "text-icon"}`}>
                {location.pathname === "/" + path ? imgActive : imgInactive}
            </div>
			{linkname}
		</Link>
	)
}

const NavBar = () => {
    const {setAllSearchedProfiles, setOpenModal} = useContext(mainContext)

    const closePostDetails = (()=> {
        setOpenModal(false)
    })

    return (  
        <nav 
            className="flex w-screen h-20 justify-between border-t-gray-300 border-t-1 px-6 pb-2 fixed bottom-0 bg-white text-sm items-center ">
            <NavLink 
                path="home" 
                imgActive={<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.50978 18.7733V15.7156C7.50978 14.9351 8.14717 14.3023 8.93344 14.3023H11.8076C12.1852 14.3023 12.5473 14.4512 12.8143 14.7163C13.0813 14.9813 13.2313 15.3408 13.2313 15.7156V18.7733C13.2289 19.0978 13.3571 19.4099 13.5874 19.6402C13.8177 19.8705 14.1311 20 14.4579 20H16.4188C17.3346 20.0023 18.2138 19.6428 18.8622 19.0008C19.5106 18.3588 19.875 17.487 19.875 16.5778V7.86686C19.875 7.13246 19.5471 6.43584 18.9796 5.96467L12.309 0.675869C11.1487 -0.251438 9.48611 -0.221498 8.36039 0.746979L1.84201 5.96467C1.24774 6.42195 0.892552 7.12064 0.875 7.86686V16.5689C0.875 18.4639 2.42238 20 4.33117 20H6.24729C6.92623 20 7.478 19.4562 7.48292 18.7822L7.50978 18.7733Z" fill="currentColor"/></svg>}
                imgInactive={<svg width="21" height="22" viewBox="0 0 21 22" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_4808_3602)"><path d="M7.53222 19.7714V16.7047C7.5322 15.9246 8.16812 15.2908 8.95601 15.2856H11.8421C12.6337 15.2856 13.2755 15.9209 13.2755 16.7047V19.7809C13.2753 20.4432 13.8093 20.9845 14.478 21H16.4021C18.3201 21 19.875 19.4607 19.875 17.5618M7.51297 19.7714C7.51297 20.4499 6.95735 21 6.27196 21H4.34791C2.42988 21 0.875 19.4607 0.875 17.5618V8.84736C0.882387 8.09967 1.23726 7.39702 1.83703 6.94256L8.38842 1.6853C9.5412 0.771567 11.1799 0.771567 12.3327 1.6853L18.913 6.93303C19.5105 7.38935 19.8648 8.09083 19.875 8.83784V12" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_4808_3602"><rect width="21" height="22" fill="white"/></clipPath></defs></svg>}
                action={closePostDetails}
            />
            <NavLink 
                path="explore" 
                imgActive={<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.976 2.60214C18.4394 2.34255 18.742 2.17429 18.9825 2.07837C19.209 1.98805 19.3082 1.99265 19.3758 2.0102C19.4425 2.02754 19.5291 2.07058 19.6774 2.25703C19.8356 2.45593 20.0105 2.74753 20.2782 3.19747L21.3821 5.0525C21.6499 5.50257 21.8227 5.7951 21.921 6.02715C22.0133 6.24515 22.0063 6.33514 21.9904 6.39301C21.9741 6.45176 21.9326 6.53473 21.7385 6.68003C21.5329 6.83397 21.2316 7.004 20.7681 7.26366L16.8361 9.46618C16.3975 9.71185 16.1138 9.86953 15.889 9.95899C15.6784 10.0428 15.5925 10.0358 15.5381 10.0214C15.4837 10.007 15.4058 9.97072 15.2658 9.7942C15.1165 9.60582 14.9506 9.32925 14.6952 8.90007L13.5162 6.91881C13.2539 6.47796 13.0851 6.19212 12.989 5.96551C12.8987 5.7528 12.9059 5.66639 12.9206 5.61202C12.9354 5.55766 12.9729 5.47928 13.1589 5.33961C13.3569 5.1908 13.6479 5.02654 14.0984 4.77419L17.976 2.60214Z" fill="currentColor"/><path d="M8.63783 8.4508L12.0871 6.51869C12.2139 6.78176 12.3907 7.07891 12.5908 7.41514L13.805 9.45545C13.9882 9.76334 14.1517 10.0381 14.3093 10.2627L12.7624 11.1292L16.9384 20.9182C17.1076 21.3148 16.919 21.7717 16.5172 21.9387C16.1153 22.1057 15.6524 21.9196 15.4832 21.523L12.0003 13.3585L8.51732 21.523C8.34812 21.9196 7.88519 22.1057 7.48335 21.9387C7.0815 21.7717 6.8929 21.3148 7.0621 20.9182L10.7594 12.2512C10.357 12.4764 10.0901 12.6231 9.87652 12.7081C9.66592 12.7919 9.57999 12.7849 9.52562 12.7705C9.47124 12.7561 9.39327 12.7198 9.25334 12.5433C9.104 12.3549 8.93814 12.0783 8.68275 11.6492L8.05569 10.5954C7.79336 10.1546 7.62457 9.86873 7.5284 9.64212C7.43814 9.42941 7.4453 9.343 7.46005 9.28863C7.47481 9.23427 7.51238 9.15589 7.6983 9.01622C7.89638 8.86741 8.18734 8.70315 8.63783 8.4508Z" fill="currentColor"/><path d="M6.62684 10.196L3.23194 12.0976C2.76839 12.3573 2.46708 12.5273 2.26148 12.6813C2.06741 12.8266 2.02586 12.9095 2.00964 12.9683C1.99365 13.0262 1.98667 13.1162 2.07902 13.3342C2.17732 13.5662 2.35007 13.8587 2.6179 14.3088C2.88564 14.7587 3.06048 15.0503 3.21868 15.2492C3.36698 15.4357 3.45364 15.4787 3.52035 15.4961C3.58788 15.5136 3.68707 15.5182 3.91358 15.4279C4.15411 15.332 4.45672 15.1637 4.92014 14.9041L8.29723 13.0124C8.13943 12.7877 7.97589 12.5128 7.79249 12.2046L7.1303 11.0918C6.93035 10.7558 6.75363 10.4589 6.62684 10.196Z" fill="currentColor"/></svg>}
                imgInactive={<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.7723 5.95647L8.62809 8.30842C7.69303 8.83909 7.22551 9.10443 7.10365 9.55928C6.98179 10.0141 7.25404 10.4777 7.79854 11.4047L8.4687 12.5458C8.99862 13.448 9.26358 13.8992 9.70898 14.0184C10.1544 14.1378 10.6094 13.8796 11.5194 13.3631L15.7217 10.9781M6.9374 9.93789L2.85057 12.2573C1.8873 12.804 1.40566 13.0773 1.27918 13.5413C1.1527 14.0054 1.43078 14.4788 1.98692 15.4257C2.54306 16.3726 2.82114 16.846 3.29317 16.9703C3.7652 17.0947 4.24683 16.8213 5.2101 16.2746L9.29693 13.9552M23.0111 4.83299L21.8313 2.82431C21.2753 1.87742 20.9972 1.40398 20.5251 1.27964C20.0531 1.15532 19.5714 1.42866 18.6082 1.97536L14.4641 4.3273C13.529 4.85798 13.0614 5.12331 12.9396 5.57816C12.8177 6.03302 13.09 6.49655 13.6345 7.42362L14.8945 9.56898C15.4245 10.4712 15.6894 10.9223 16.1348 11.0417C16.5802 11.161 17.0352 10.9027 17.9451 10.3863L22.1475 8.00137C23.1107 7.45468 23.5924 7.18134 23.7189 6.71733C23.8453 6.25334 23.5672 5.77989 23.0111 4.83299Z" stroke="currentColor" stroke-width="1.1" stroke-linejoin="round"/><path d="M12.499 13.0625L16.999 23.75" stroke="currentColor" stroke-width="1.1" stroke-linecap="round"/><path d="M12.499 13.0625L7.99902 23.75" stroke="currentColor" stroke-width="1.1" stroke-linecap="round"/></svg>}
                action={() => {setAllSearchedProfiles(null); closePostDetails()}}
            />
            <NavLink 
                path="newpost"
                imgActive={<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_10_524)"><path d="M24.125 12C24.125 5.7868 19.0882 0.75 12.875 0.75C6.6618 0.75 1.625 5.7868 1.625 12C1.625 18.2132 6.6618 23.25 12.875 23.25C19.0882 23.25 24.125 18.2132 24.125 12Z" fill="currentColor" stroke="currentColor" stroke-width="1.5"/><path d="M13.2939 7.78027C13.6162 9.70349 14.9298 11.3024 16.7305 12L17.0967 12.127L18.3037 12.5L17.0967 12.873C15.2335 13.448 13.8233 14.9617 13.3711 16.8389L13.2939 17.2197L13 18.9736L12.7061 17.2197C12.3838 15.2965 11.0702 13.6976 9.26953 13L8.90332 12.873L7.69531 12.5L8.90332 12.127C10.7665 11.552 12.1767 10.0383 12.6289 8.16113L12.7061 7.78027L13 6.02539L13.2939 7.78027Z" fill="white" stroke="white"/></g><defs><clipPath id="clip0_10_524"><rect width="25" height="24" fill="white"/></clipPath></defs></svg>}
                imgInactive={<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.18879 17.7236C0.0277676 12.3746 1.80147 5.47582 7.15047 2.31479C12.4995 -0.846234 19.3982 0.927469 22.5592 6.27647C25.7203 11.6255 23.9466 18.5242 18.5976 21.6852C15.8255 23.3234 12.6373 23.6362 9.76875 22.813" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/><path d="M13.0977 7.55469C13.4261 9.48071 14.7492 11.0774 16.5566 11.7676L16.9238 11.8936L17.2744 12L16.9238 12.1064C15.0543 12.6733 13.6356 14.1852 13.1768 16.0645L13.0977 16.4453L12.999 17.0234L12.9004 16.4453C12.5719 14.5193 11.2489 12.9226 9.44141 12.2324L9.07422 12.1064L8.72266 12L9.07422 11.8936C10.9437 11.3267 12.3625 9.81483 12.8213 7.93555L12.9004 7.55469L12.999 6.97559L13.0977 7.55469Z" stroke="currentColor"/></svg>}
                action={closePostDetails}
            />
            <NavLink 
                path="search" 
                imgActive={<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.125 8.66993C0.125 3.88166 3.96534 0 8.70264 0C10.9776 0 13.1593 0.913436 14.7679 2.53936C16.3766 4.16529 17.2803 6.37052 17.2803 8.66993C17.2803 13.4582 13.4399 17.3399 8.70264 17.3399C3.96534 17.3399 0.125 13.4582 0.125 8.66993ZM17.1384 15.6543L19.693 17.7164H19.7374C20.2542 18.2388 20.2542 19.0858 19.7374 19.6082C19.2205 20.1306 18.3826 20.1306 17.8657 19.6082L15.7457 17.1785C15.5453 16.9766 15.4326 16.7024 15.4326 16.4164C15.4326 16.1304 15.5453 15.8562 15.7457 15.6543C16.1322 15.2704 16.7518 15.2704 17.1384 15.6543Z" fill="currentColor"/></svg>}
                imgInactive={<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.4967 22.4673C20.7506 22.7211 21.1621 22.7211 21.416 22.4673C21.6698 22.2135 21.6698 21.8019 21.416 21.5481L20.4967 22.4673ZM17.5836 18.6349L17.124 19.0946L20.4967 22.4673L20.9563 22.0077L21.416 21.5481L18.0432 18.1753L17.5836 18.6349Z" fill="currentColor"/><path d="M4.42632 16.3464C1.98119 12.2088 3.3532 6.87243 7.49078 4.4273C11.6284 1.98217 16.9647 3.35417 19.4098 7.49175C21.855 11.6293 20.483 16.9657 16.3454 19.4108C14.2011 20.678 11.735 20.9199 9.51608 20.2831" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg>}
                action={() => {setAllSearchedProfiles(null); closePostDetails()}}
            />
            <NavLink
                path="profile" 
                imgActive={<svg width="20" height="26" viewBox="0 0 20 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.0433 10.8701C12.7689 10.8701 14.9784 8.66063 14.9784 5.93507C14.9784 3.2095 12.7689 1 10.0433 1C7.31778 1 5.10828 3.2095 5.10828 5.93507C5.10828 8.66063 7.31778 10.8701 10.0433 10.8701Z" fill="currentColor" stroke="currentColor" stroke-width="1.57576"/><path d="M10.3033 14.9398C12.8966 14.9398 15.2146 15.5322 16.8629 16.4593C18.5299 17.397 19.394 18.5976 19.3942 19.7874C19.3942 20.9774 18.5301 22.1787 16.8629 23.1165C15.2146 24.0437 12.8966 24.636 10.3033 24.6361C7.71012 24.6361 5.39209 24.0436 3.74377 23.1165C2.07644 22.1787 1.21252 20.9775 1.21252 19.7874C1.21274 18.5975 2.07665 17.3971 3.74377 16.4593C5.39209 15.5322 7.7101 14.9398 10.3033 14.9398Z" fill="currentColor" stroke="currentColor" stroke-width="1.21212"/></svg>}
                imgInactive={<svg width="16" height="21" viewBox="0 0 16 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.78475 9.14286C10.0333 9.14286 11.8562 7.32002 11.8562 5.07143C11.8562 2.82284 10.0333 1 7.78475 1C5.53616 1 3.71332 2.82284 3.71332 5.07143C3.71332 7.32002 5.53616 9.14286 7.78475 9.14286Z" stroke="currentColor" stroke-width="1.3"/><path d="M10.6929 19.6083C9.81144 19.8595 8.82547 20 7.78474 20C4.03709 20 0.999023 18.1772 0.999023 15.9286C0.999023 13.6801 4.03709 11.8572 7.78474 11.8572C11.5324 11.8572 14.5705 13.6801 14.5705 15.9286C14.5705 16.2801 14.4962 16.6212 14.3567 16.9465" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg>}              
                action={closePostDetails}
            />
        </nav>
    );
}

export default NavBar
